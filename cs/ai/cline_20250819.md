
# CS「Cline」

- 2025-08-19 23:51:59

## わざわざ言語化されないClineのコツ 2025/03/05

https://zenn.dev/watany/articles/85af6cfb8dccb2

- 読まれたくないファイルは.clineignoreで制御
- .clinerules/system prompt
    - 失敗時のフロー制御
        - ex. "同じファイルへの操作を2回失敗するならプランを再検討して"
    - タスク完了を定義する
        - ex. "〇〇でのテストが全件通るのがタスク完了です"
    - Linter.Formatter,Testツールの使い方
        - ex. "Lint.Format,Testはnpm scriptに従ってください。具体的な使用例は～"
- .clinerulesは日本語で書かない

## AIエージェント開発における自己文書化：Clineのメモリーバンク機能

https://note.com/nobita2041/n/n6a3764c820ec

- Cline Memory Bank
    - https://docs.cline.bot/prompting/cline-memory-bank
    - .clinerulesのcline-memory-bank.mdとかにdocのプロンプトをコピペ
    - memory-bankディレクトリを作る
        - https://zenn.dev/yoshik159753/scraps/9bbd97a6f67b2a#comment-3215e29bfa53f1
    - initialize memory bankと打つ

## Clineを本気でカスタマイズ！.clinerules活用ガイド【2025年最新版】 2025-06-28

https://amatyrain.pages.dev/posts/cline-customization/

- Custom InstructionsはVSCode全体
- .clinerulesはPJ全体に適用しgitで共有可能
- 左下の天秤マークをクリック

```md:.clinerulesの例
# プロジェクトガイドライン
## ドキュメント要件
- 機能を修正する際は /docs の関連ドキュメントを更新する
- README.md を新機能と同期させる
- CHANGELOG.md にエントリを追加する

## アーキテクチャ判断の記録
以下の場合はADRを /docs/adr に作成：
- 主要な依存関係の変更
- アーキテクチャパターンの変更
- 新しい統合パターン
- データベーススキーマの変更
  /docs/adr/template.md のテンプレートに従う

## コードスタイルとパターン
- OpenAPI Generatorを使用してAPIクライアントを生成
- TypeScript axiosテンプレートを使用
- 生成されたコードは /src/generated に配置
- 継承よりコンポジションを優先
- データアクセスにはリポジトリパターンを使用
- エラー処理は /src/utils/errors.ts のパターンに従う

## テスト基準
- ビジネスロジックにはユニットテストが必須
- APIエンドポイントには統合テストを実施
- 重要なユーザーフローにはE2Eテストを実施
```

```log:フォルダ構造の例
your-project/
├── .clinerules/           # アクティブなルール
│   ├── 01-coding.md      # コーディング標準
│   ├── 02-documentation.md # ドキュメント要件
│   └── current-sprint.md  # 現在のスプリント用
├── clinerules-bank/      # 利用可能なルールの保管庫
│   ├── clients/          # クライアント固有のルール
│   ├── frameworks/       # フレームワーク固有のルール
│   └── project-types/    # プロジェクトタイプ別の標準
└── ...
```

## チューニング



## チューニング

| 項目                          | 推奨値                 |
| --------------------------- | ------------------- |
| Context Length              | **16384**           |
| GPU Offload                 | **40〜50（64の75%程度）** |
| CPU Thread Pool Size        | **16〜20**           |
| Evaluation Batch Size       | **128〜192**         |
| Offload KV Cache to GPU Mem | **ON**              |
| Keep Model in Memory        | **ON**              |
| Try mmap()                  | **ON**              |
| Flash Attention             | **ON**              |
| K Cache Quantization Type   | **Q8_0**              |
| V Cache Quantization Type   | **Q8_0**              |

CPU  60%
GPU 22%
VRAM  17.3GB
まだ攻めれるかも。

↓

| 項目                          | 推奨値                 |
| --------------------------- | ------------------- |
| Context Length              | **16384**           |
| GPU Offload                 | **64** |
| CPU Thread Pool Size        | **16**           |
| Evaluation Batch Size       | **256**         |
| Offload KV Cache to GPU Mem | **ON**              |
| Keep Model in Memory        | **ON**              |
| Try mmap()                  | **ON**              |
| Flash Attention             | **ON**              |
| K Cache Quantization Type   | **Q8_0**              |
| V Cache Quantization Type   | **Q8_0**              |

CPU  30%
GPU 85%
VRAM  22.8GB
しっかりGPU使っててよさげ。
ファンも前よりうるさくない。
生成速度も速い

↓

UE5起動しながら用
| Context Length              | **13000**           |
| GPU Offload                 | **50** |
| Evaluation Batch Size       | **192**         |

UE5起動で
CPU7%
GPU10～50%
VRAM22.9GB

更にClineを動かすと
CPU50%
GPU40%
VRAM23GB

## .clineignore 公式doc

https://docs.cline.bot/prompting/prompt-engineering-guide#overview

- 

```md: example
# Dependencies
node_modules/
**/node_modules/
.pnp
.pnp.js

# Build outputs
/build/
/dist/
/.next/
/out/

# Testing
/coverage/

# Environment variables
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Large data files
*.csv
*.xlsx
```


